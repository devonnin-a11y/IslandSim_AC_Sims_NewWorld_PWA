
:root{
  --paper:#f6f3ea;
  --paper2:#efe8d8;
  --card:#fff7e6;
  --ink:#2d2d27;
  --muted:rgba(0,0,0,.55);
  --shadow:0 10px 24px rgba(0,0,0,.10);
  --r:28px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  background:var(--paper);
  color:var(--ink);
  overflow:hidden;
}

#game{display:flex;flex-direction:column;align-items:center;gap:10px;padding:10px}

.topbar{
  width:min(980px, 96vw);
  display:flex;align-items:center;justify-content:space-between;
}
.chip{
  background:var(--card);
  border-radius:999px;
  padding:8px 12px;
  box-shadow:var(--shadow);
  font-weight:900;
}
.topbar-right{display:flex;gap:8px}

.stage{
  position:relative;
  width:min(980px, 96vw);
}
#world{
  width:100%;
  height:auto;
  background:linear-gradient(#87ceeb,#7ec850);
  border-radius:24px;
  box-shadow:var(--shadow);
  display:block;
}
#minimap{
  position:absolute;
  right:10px;
  top:10px;
  width:160px;
  height:160px;
  border-radius:18px;
  background:rgba(255,247,230,.85);
  box-shadow:var(--shadow);
  border:2px solid rgba(0,0,0,.06);
}

#hud{
  width:min(980px, 96vw);
  background:var(--paper2);
  border-radius:var(--r);
  padding:12px;
  box-shadow:var(--shadow);
}

.hud-top,.hud-mid,.hud-bottom{
  display:flex;justify-content:space-between;align-items:center;gap:10px;
}
.sim-info{font-weight:1000}
.muted{font-size:12px;color:var(--muted);font-weight:700}

.btn{
  border:none;border-radius:999px;padding:10px 14px;font-weight:1000;
  background:#dff0e0; box-shadow:var(--shadow); cursor:pointer;
}
.btn:active{transform:scale(.98)}

.time{display:flex;gap:8px;align-items:center}
.needs{
  display:grid;
  grid-template-columns: repeat(5, minmax(0,1fr));
  gap:10px;
  width:100%;
}
@media (max-width: 820px){
  .needs{grid-template-columns: repeat(2, minmax(0,1fr))}
  #minimap{width:120px;height:120px}
}
.need{
  background:var(--card);
  border-radius:18px;
  padding:8px 10px;
  box-shadow:var(--shadow);
}
.need-row{display:flex;justify-content:space-between;align-items:center;font-weight:1000}
.bar{height:8px;background:rgba(0,0,0,.08);border-radius:999px;overflow:hidden;margin-top:6px}
.fill{height:100%;width:50%;background:#8bd48b;border-radius:999px}

.hud-bottom{align-items:flex-start}
.dpad{display:flex;flex-direction:column;gap:6px}
.dpad button{width:54px;height:54px;font-size:20px}
.dpad-row{display:flex;gap:6px;justify-content:center}

.actions-strip{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;align-items:center}
.pill{
  border:none;border-radius:18px;padding:10px 12px;font-weight:1000;
  background:var(--card);box-shadow:var(--shadow);cursor:pointer;
}
.queue{flex:1}
.card-title{font-weight:1000;margin:2px 0 6px}
#queue{font-size:13px}
#queue .qitem{
  display:flex;justify-content:space-between;align-items:center;
  background:rgba(0,0,0,.04);border-radius:14px;padding:8px 10px;margin-bottom:6px;
}
#queue .qmeta{display:flex;gap:8px;align-items:center}
#queue .qbtns{display:flex;gap:6px}
.qmini{border:none;border-radius:999px;padding:6px 10px;font-weight:1000;cursor:pointer;box-shadow:var(--shadow)}
.qmini.danger{background:#f5c2c7}

#phone,#cas,#build,#journal,#inventory{
  position:fixed;inset:0;display:none;align-items:center;justify-content:center;
  background:rgba(0,0,0,.25);
  backdrop-filter: blur(6px);
  z-index:50;
}
#phone.show,#cas.show,#build.show,#journal.show,#inventory.show{display:flex}
.phone-card,.panel-card{
  width:min(520px, 92vw);
  background:var(--card);
  border-radius:28px;
  padding:16px;
  box-shadow:var(--shadow);
  animation: pop .18s ease-out;
}
@keyframes pop{from{transform:translateY(8px) scale(.98);opacity:0}to{transform:translateY(0) scale(1);opacity:1}}
.phone-grid{
  display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px;
}
.phone-grid button{
  border:none;border-radius:18px;padding:14px 12px;font-weight:1000;
  background:#fff;box-shadow:var(--shadow);cursor:pointer;
}
.row{display:flex;gap:10px;margin-top:12px}
label{font-weight:1000;font-size:12px;color:var(--muted)}
input[type="text"], input, input[type="range"]{width:100%}
